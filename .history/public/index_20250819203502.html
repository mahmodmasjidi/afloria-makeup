<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Afloria Makeup ‚Äî Store</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">

  <!-- External CSS -->
  <link rel="stylesheet" href="/css/aflorya.css">
</head>
<body>

  <!-- Header -->
  <header>
    <div class="brand">
      <div class="logo">
        <img src="images/logo.png" alt="Afloria Makeup Logo">
      </div>
      <div>
        <h1>Afloria Makeup</h1>
        <p>&amp; Cosmetics ‚Äî Elegant beauty products</p>
      </div>
    </div>

    <nav>
      <a href="#products">Products</a>
    </nav>

    <!-- Google Translate Dil Se√ßici -->
    <div class="lang-select" id="google_translate_element"></div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="hero-left">
      <div class="kicker">New Collection</div>
      <h2>Natural Glow ‚Äî Timeless Elegance</h2>
      <p class="lead">Delight your skin with Afloria's special formulas. Limited stock ‚Äî contact us on WhatsApp for easy ordering.</p>

      <div class="cta">
        <a class="btn btn-primary" href="javascript:openWhatsApp()">Order on WhatsApp</a>
        <a class="btn btn-ghost" href="#products">Browse Products</a>
      </div>
    </div>

    <div class="hero-right">
      <div class="hero-card">
        <img src="images/mainproduct.png" alt="Featured product">
        <div style="text-align:left">
          <div style="font-size:14px;color:#8b6d68">Afloria ‚Äî Compact Blush</div>
          <div class="price">$19.99</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Products -->
  <main class="section" id="products">
    <h3 class="section-title">Popular Products</h3>
    <div class="grid" id="product-grid">
      <!-- √úr√ºnler burada MongoDB'den y√ºklenecek -->
    </div>
  </main>

  <!-- Footer -->
  <footer>
    ¬© <span id="year"></span> Afloria Makeup ‚Äî All rights reserved.
  </footer>

  <!-- WhatsApp Fixed Button -->
  <div class="wa-fixed">
    <a class="wa-btn" href="javascript:openWhatsApp()">
      <div class="wa-circle">üí¨</div>
      Contact on WhatsApp
    </a>
  </div>

  <!-- Google Translate Script -->
  <div id="google_translate_element"></div>
  <script type="text/javascript">
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({
        pageLanguage: 'en',
        includedLanguages: 'en,fa',
        layout: google.translate.TranslateElement.InlineLayout.SIMPLE
      }, 'google_translate_element');
    }
  </script>
  <script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

     <div class="grid" id="product-grid">
  <!-- √úr√ºnler JS ile y√ºklenecek -->
</div>
  <!-- JavaScript -->


<script>
// √úr√ºnleri MongoDB'den √ßekip ekleme
async function loadProducts() {
  try {
    const res = await fetch('/api/products');
    const products = await res.json();
    const grid = document.getElementById('product-grid');
    grid.innerHTML = '';

    products.forEach(product => {
      const card = document.createElement('article');
      card.className = 'card';

      // Ana foto + k√º√ß√ºk thumbnail
      let thumbsHtml = '';
      if (product.imgs && product.imgs.length > 1) {
        thumbsHtml = `<div class="thumbs">` + 
          product.imgs.map(img => `<img src="${img}" alt="${product.name}">`).join('') +
          `</div>`;
      }

      card.innerHTML = `
        <div class="product-images">
          <img src="${product.imgs[0]}" alt="${product.name}" class="main-img">
          ${thumbsHtml}
        </div>
        <div class="product-info">
          <h3 class="product-title">${product.name}</h3>
          <div class="price-small">$${product.price}</div>
          <a class="whatsapp" href="javascript:openWhatsApp('${product.name}')">Order on WhatsApp</a>
        </div>
      `;

      grid.appendChild(card);
    });

    // Thumbnail tƒ±klayƒ±nca ana foto deƒüi≈üimi
    document.querySelectorAll('.product-card, .card').forEach(card => {
      const mainImg = card.querySelector('.main-img');
      if (!mainImg) return;
      card.querySelectorAll('.thumbs img').forEach(thumb => {
        thumb.addEventListener('click', () => {
          mainImg.src = thumb.src;
        });
      });
    });

  } catch (err) {
    console.error('√úr√ºnler y√ºklenemedi:', err);
  }
}

document.addEventListener('DOMContentLoaded', loadProducts);
</script>

  <script type="text/javascript" src="js/aflorya.js"></script>
  <script>
    const WHATSAPP_NUMBER = "93772908109"; // ‚Üê Buraya kendi numaranƒ± gir (ba≈üƒ±nda √ºlke kodu ile)

    function openWhatsApp(productName) {
      let message = "Hello, I would like to order";
      if (productName) message += `: ${productName}`;
      window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(message)}`, "_blank");
    }

    document.getElementById("year").textContent = new Date().getFullYear();
  </script>

</body>
</html>
